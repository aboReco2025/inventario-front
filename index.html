<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Inventario Recovery</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
    <script src='index.js' defer></script>
</head>

<body>
    <header>
        <div class="left">
            <nav>
                <a href="index.html">
                    <img src="img/img_reco.png" alt="logo Arcsas" class="nav-img">
                </a>
                <a class="btn btn-success" style="float: right" position="left" href="crear_Formulario.html">Crear
                    Formulario</a>
                <a id="exportar" class="btn btn-success" style="float: right" position="right">Exportar</a>
            </nav>
        </div>

    </header>

    <main>
        <aside>
        </aside>
        <section>
            <div class="row g-2 align-items-center mb-3 justify-content-end">
                <div class="col-auto">
                    <label for="columnaFiltro" class="form-label fw-bold">Filtrar por:</label>
                    <select id="columnaFiltro" class="form-select">
                        <option value="1">Nombre</option>
                        <option value="2">Categoría</option>
                        <option value="3">Departamento</option>
                        <option value="4">Condición</option>
                        <option value="5">Pertenencia</option>
                        <option value="6">Propietario</option>
                        <option value="10">Sede</option>
                        <option value="12">Estado</option>
                    </select>
                </div>

                <div class="col-auto">
                    <label for="valorFiltro" class="form-label fw-bold">Valor:</label>
                    <input type="text" id="valorFiltro" class="form-control" placeholder="Ingrese valor">
                </div>

                <div class="col-auto">
                    <label class="form-label fw-bold d-block">&nbsp;</label>
                    <button class="btn btn-primary" onclick="aplicarFiltro()">Aplicar</button>
                    <button class="btn btn-danger" onclick="limpiarFiltro()">Limpiar Filtro</button>
                </div>
            </div>
        </section>
        <section>
            <table class="table table-striped-columns" id="tabla">
                <thead>
                    <tr>
                        <th>Id Implemento</th>
                        <th>Nombre</th>
                        <th>Categoría</th>
                        <th>Departamento</th>
                        <th>Condición</th>
                        <th>Pertenencia</th>
                        <th>Propietario</th>
                        <th>Cantidad</th>
                        <th>Valor</th>
                        <th>Fecha</th>
                        <th>Sede</th>
                        <th>Descripción</th>
                        <th>Estado</th>
                        <th>Opciones</th>
                    </tr>
                </thead>
                <tbody id="tabla-body">
                </tbody>
            </table>
            <div class="d-flex justify-content-between mb-2">
                <div>
                    <span id="totalRegistros" class="fw-bold"></span>
                </div>
            </div>
        </section>
    </main>

    <footer>
        Versión 1.0
    </footer>
</body>
<script>
    document.getElementById("btnFiltrar").addEventListener("click", aplicarFiltro);

    // Acción al presionar Enter en el input
    document.getElementById("valorFiltro").addEventListener("keypress", function (e) {
        if (e.key === "Enter") {
            aplicarFiltro();
        }
    });

    function aplicarFiltro() {
        const columna = document.getElementById("columnaFiltro").value;
        const valor = document.getElementById("valorFiltro").value.toLowerCase().trim();
        const tabla = document.getElementById("tabla");
        const filas = tabla.getElementsByTagName("tr");

        for (let i = 1; i < filas.length; i++) {
            const celdas = filas[i].getElementsByTagName("td");
            if (celdas[columna]) {
                const texto = celdas[columna].innerText.toLowerCase().trim();

                let mostrar = false;

                // Si la columna es Estado (12) → coincidencia exacta
                if (columna == 12) {
                    mostrar = (texto === valor);
                } else {
                    // Para las demás columnas → coincidencia parcial
                    mostrar = texto.includes(valor);
                }

                filas[i].style.display = mostrar ? "" : "none";
            }
        }
    }

    function limpiarFiltro() {
        document.getElementById("valorFiltro").value = "";
        const tabla = document.getElementById("tabla");
        const filas = tabla.getElementsByTagName("tr");

        for (let i = 1; i < filas.length; i++) {
            filas[i].style.display = ""; // muestra todas otra vez
        }
    }
</script>

<style>
    @import url('https://fonts.googleapis.com/css2?family=Nunito+Sans:ital,opsz,wght@0,6..12,200..1000;1,6..12,200..1000&display=swap');

    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Nunito Sans", sans-serif;
        font-size: 1;
    }

    body {
        width: 100%;
        height: 100vh;
        margin: 0;
        padding: 4px;
    }

    header {
        border: solid gray;
        margin: 0px;
    }

    main {
        border: solid pink;
        margin: 0px;
    }

    footer {
        border: solid green;
        margin: 0px;
    }

    .nav-img {
        width: 11%;
    }

    nav a {
        margin-top: 2px;
        margin-right: 3px;
        text-decoration: none;
    }

    nav a:hover {
        border-bottom: solid black;
    }

    section {
        border: solid yellow;
    }

    :root {
        --background-color: white;
        --text-title-color: #053D4E;
        --text-color: #32363B;
        --icon-color: #32363B;
        --icon-menu-color: #707780;
        --menu-color: #707780;

        --text-selected-color: #355CC0;
        --background-selected: #EBF0FF;
        --background-hover: #F7F9FA;

        --border-color: #E6E9ED;

    }

    /*.left{
        border: 2px solid green;
        width: 100px;
        height: 20px;
    }
    .right{
        border: 2px solid green;
        width: 100px;
        height: 20px;
    }*/

    .form-select,
    .form-control {
        max-width: 250px;
        border-radius: 0.375rem;
        /* bordes suaves */
        box-shadow: none !important;
        /* sin sombras azules al enfocar */
    }

    .form-label {
        margin-right: 5px;
        font-size: 0.9rem;
    }

    button.btn {
        min-width: 100px;
    }

    .titulo {
        font-family: 'Arial', sans-serif;
        font-size: 36px;
        color: #2c3e50;
        text-align: center;
        margin-top: 40px;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
    }

    form {
        font-family: 'Arial', sans-serif;
        text-align: center;
        margin: 20px auto;
        padding: 20px;
        border: 1px solid #ccc;
    }
</style>

</html>