<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Inventario Recovery</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
</head>

<body onload="recorrerDepartamentos()">
    <h1 class="titulo">Editar Inventario Abogados Recovery</h1>

    <a class="btn btn-secondary" style="float:right" href="index.html">Inventario</a><br>

    <form class="form-select" size="3" aria-label="Size 3 select example" id="formulario">
        <div class="row justify-content-md-center">
            <div class="form-group col-md-2">
                <label for="id_implemento">ID del implemento</label>
                <div>
                    <input onchange="activarID()" class="form-control" type="text" name="id_implemento"
                        id="id_implemento" readonly>
                </div>
            </div>

            <div class="form-group col-md-2">
                <label for="categoria">Categoria</label>
                <div>
                    <select onload="activarCategoria()" onchange="nombre()" name="categoria" class="form-select"
                        aria-label="Default select example" id="categoria">
                        <option value="Equipos de Computo">Equipos de Computo</option>
                        <option value="Muebles">Muebles</option>
                    </select>
                </div>
            </div>

            <div class="form-group col-md-2">
                <label for="implemento">Tipo de implemento</label>
                <div>
                    <select name="implemento_name" class="form-select" aria-label="Default select example"
                        id="implemento_name">
                    </select>
                </div>

            </div>

            <div class="form-group col-md-2">
                <label for="departamento">Departamento</label>
                <div>
                    <select name="departamento" class="form-select" aria-label="Default select example"
                        id="departamento">
                    </select>
                </div>
            </div>

            <div class="form-group col-md-2">
                <label for="condicion">Condici칩n</label>
                <div>
                    <select onchange="activarCondicion()" class="form-select" aria-label="Default select example"
                        id="condicion">
                        <option value="Nuevo">Nuevo</option>
                        <option value="Bueno">Bueno</option>
                        <option value="Regular">Regular</option>
                        <option value="Malo">Malo</option>
                    </select>
                </div>
            </div>
        </div>

        <br>

        <div class="row justify-content-md-center">
            <div class="form-group col-md-2">
                <label for="Pertenencia">Propiedad</label>
                <div>
                    <select onchange="activarPertenencia()" class="form-select" aria-label="Default select example"
                        id="pertenencia">
                        <option value="Propio">Propio</option>
                        <option value="Alquiler">Alquiler</option>
                    </select>
                </div>
            </div>

            <div class="form-group col-md-2">
                <label for="Propietario">Propietario</label>
                <div>
                    <select class="form-select" aria-label="Default select example" id="propietario">
                        <option value="1">Abogados Recovery</option>
                        <option value="2">Milenio Pc</option>
                        <option value="3">Flycomm</option>
                    </select>
                </div>
            </div>
            <div class="form-group col-md-2">
                <label for="valor">Valor</label>
                <div>
                    <input onchange="activarValor()" class="form-control" type="number" name="valor" id="valor">
                </div>
            </div>

            <div class="form-group col-md-2">
                <label for="fecha">Fecha</label>
                <div>
                    <input onchange="activarFecha()" class="form-control" type="date" name="fecha" id="fecha">
                </div>
            </div>

            <div class="form-group col-md-2">
                <label for="estado">Estado</label>
                <div>
                    <select onchange="activarEstado()" name="estado" class="form-select" name="estado"
                        aria-label="Default select example" id="estado">
                        <option value="Activo">Activo</option>
                        <option value="Inactivo">Inactivo</option>
                    </select>
                </div>
            </div>
        </div>

        <br>

        <label for="botones">
            <div>
                <button type='update' class="btn btn-primary" name="submit" id="btnUpdate">Actualizar</button>
            </div>
        </label>

    </form>
    <script src='main_ef.js'></script>
    <script>
        const valor = document.querySelector('#valor');
        const fecha = document.querySelector('#fecha');
        const estado = document.querySelector('#estado');
        const pertenencia = document.querySelector('#pertenencia');
        const propietario = document.querySelector('#propietario');
        const condicion = document.querySelector('#condicion');
        const departamento = document.querySelector('#departamento');
        const nombre_imp = document.querySelector('#implemento_name');
        const categoria = document.querySelector('#categoria');
        const id_implemento = document.querySelector('#id_implemento');



        traerInformacion().then(async (informacion) => {
            console.log(informacion);

            valor.value = informacion.valor;

            const fechaObj = new Date(informacion.fecha);
            const fechaFormateadaInput = fechaObj.toISOString().split('T')[0];
            fecha.value = fechaFormateadaInput;
            estado.value = informacion.estado;
            pertenencia.value = informacion.pertenencia;
            propietario.value = informacion.propietario;
            condicion.value = informacion.condicion;
            departamento.value = informacion.departamento;
            categoria.value = informacion.categoria;
            await activarCategoria();
            await nombre(informacion.nombre);
            nombre_imp.value = informacion.nombre;
            id_implemento.value = informacion.id_implemento;
            console.log("Informaci칩n de departamentos cargada correctamente.");
            console.log(informacion.nombre);
            console.log(informacion.categoria);
            console.log(informacion.id_implemento);
        }).catch(error => {
            console.error("Error al cargar la informaci칩n de departamentos:", error);
        });

        // Obtener la fecha actual en formato YYYY-MM-DD
  const hoy = new Date().toISOString().split("T")[0];

  // Asignar la fecha m치xima al input
  document.getElementById("fecha").setAttribute("max", hoy);
    </script>
</body>

</html>