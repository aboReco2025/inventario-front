<!DOCTYPE html>
<html>
    <head>
        <meta charset='utf-8'>
        <meta http-equiv='X-UA-Compatible' content='IE=edge'>
        <title>Inventario Recovery</title>
        <meta name='viewport' content='width=device-width, initial-scale=1'>
        <link rel="stylesheet" href="styles.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
    </head>
    <body onload="recorrerDepartamentos()">
        <h1 class="titulo">Editar Inventario Abogados Recovery</h1>

        <a class="btn btn-secondary" style="float:right" href="index.html">Inventario</a><br>

        <form class="form-select" size="3" aria-label="Size 3 select example" id="formulario">

        <label for="id_implemento">ID del implemento
            <div>
                <input class="form-control" type="text" name="id_implemento" id="id_implemento" readonly>
            </div>
        </label>
        
        <label for="categoria">Categoría
            <div>
            <select onload="activarCategoria(); nombre()" class="form-select" aria-label="Default select example" id="categoria">
                <option value="Equipos de computo">Equipos de computo</option>
                <option value="Muebles">Muebles</option>
            </select>
        </div>
        </label>

        <label for="implemento">Tipo de implemento
        <div>
            <select name="implemento_name" class="form-select" aria-label="Default select example" id="implemento_name">
            </select>
        </div>
        </label>

        <label for="departamento">Departamento
        <div>
            <select  name="departamento" class="form-select" aria-label="Default select example" id="departamento">
            </select>
        </div>
        </label>

        <label for="estado">Condición
            <div>
                <select onchange="activarCondicion()" class="form-select" aria-label="Default select example" id="condicion">
                    <option value="Nuevo">Nuevo</option>
                    <option value="Bueno">Bueno</option>
                    <option value="Regular">Regular</option>
                    <option value="Malo">Malo</option>
                </select>
            </div>
        </label>

        <label for="Pertenencia">Propiedad
            <div>
                <select onchange="activarPertenencia()" class="form-select" aria-label="Default select example" id="pertenencia">
                    <option value="Propio">Propio</option>
                    <option value="Alquiler">Alquiler</option>
                </select>
            </div>
        </label>
        <!--<div class="input-field col s12">
            <input onchange="activarCantidad()" type="number" name="cantidad" placeholder="Ingrese la Cantidad" id="cantidad">
        </div><br>-->
        <label for="valor">Valor
            <div>
                <input onchange="activarValor()" class="form-control" type="number" name="valor" id="valor">
            </div>
        </label>

        <label for="fecha">Fecha
            <div>
                <input onchange="activarFecha()" class="form-control" type="date" name="fecha" id="fecha">
            </div>
        </label>

        <label for="estado">Estado
            <div>
                <select name="estado" class="form-select" name="estado" aria-label="Default select example" id="estado">
                    <option value="Activo">Activo</option>
                    <option value="Inactivo">Inactivo</option>
                </select>
            </div>
        </label>


        <label for="botones">
            <div>
                <button type='submit' class="btn btn-primary" name="submit" id="btnRegistrar">Registrar</button>
                <button onclick="limpiarFormulario()" class="btn btn-secondary" id="btnLimpiar">Limpiar</button>
            </div>
        </label>
        
    </form>
    <script src='main_ef.js'></script>
    <script>
        const valor = document.querySelector('#valor');
        const fecha = document.querySelector('#fecha');
        const estado = document.querySelector('#estado');
        const pertenencia = document.querySelector('#pertenencia');
        const condicion = document.querySelector('#condicion');
        const departamento = document.querySelector('#departamento');
        const implemento_name = document.querySelector('#implemento_name');
        const categoria = document.querySelector('#categoria');
        const id_implemento = document.querySelector('#id_implemento');

        traerInformacion().then((informacion) => {
            valor.value = informacion.valor;

            const fechaObj = new Date(informacion.fecha);
            const fechaFormateadaInput = fechaObj.toISOString().split('T')[0];
            fecha.value = fechaFormateadaInput;

            estado.value = informacion.estado;
            pertenencia.value = informacion.pertenencia;
            condicion.value = informacion.condicion;
            departamento.value = informacion.departamento;
            categoria.value = informacion.categoria;
            implemento_name.value = informacion.nombre;
            id_implemento.value = informacion.id_implemento;
            console.log("Información de departamentos cargada correctamente.");
            console.log(informacion.nombre);
            console.log(informacion.categoria);
            console.log(informacion)
        }).catch(error => {
            console.error("Error al cargar la información de departamentos:", error);
        });
    </script>
    </body>
</html>